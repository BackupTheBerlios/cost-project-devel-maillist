<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [cost-devel] Validation function - clash of Days at sea	and	number of sets fields
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cost-project-devel/2007-December/index.html" >
   <LINK REL="made" HREF="mailto:cost-project-devel%40lists.berlios.de?Subject=Re%3A%20%5Bcost-devel%5D%20Validation%20function%20-%20clash%20of%20Days%20at%0A%20sea%09and%09number%20of%20sets%20fields&In-Reply-To=%3C47613957.1030306%40ipimar.pt%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000091.html">
   <LINK REL="Next"  HREF="000083.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[cost-devel] Validation function - clash of Days at sea	and	number of sets fields</H1>
    <B>ernesto</B> 
    <A HREF="mailto:cost-project-devel%40lists.berlios.de?Subject=Re%3A%20%5Bcost-devel%5D%20Validation%20function%20-%20clash%20of%20Days%20at%0A%20sea%09and%09number%20of%20sets%20fields&In-Reply-To=%3C47613957.1030306%40ipimar.pt%3E"
       TITLE="[cost-devel] Validation function - clash of Days at sea	and	number of sets fields">ernesto at ipimar.pt
       </A><BR>
    <I>Thu Dec 13 14:53:27 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000091.html">[cost-devel] Validation function - clash of Days at sea	and	number of sets fields
</A></li>
        <LI>Next message: <A HREF="000083.html">[cost-devel] COSTcore 0.5-0 released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#93">[ date ]</a>
              <a href="thread.html#93">[ thread ]</a>
              <a href="subject.html#93">[ subject ]</a>
              <a href="author.html#93">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alastair Pout wrote:
&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-devel">cost-project-devel-bounces at lists.berlios.de</A>
</I>&gt;<i> [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-devel">cost-project-devel-bounces at lists.berlios.de</A>] On Behalf Of
</I>&gt;<i> ernesto
</I>&gt;<i> Sent: 13 December 2007 12:27
</I>&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-devel">cost-project-devel at lists.berlios.de</A>
</I>&gt;<i> Subject: Re: [cost-devel] Validation function - clash of Days at sea and
</I>&gt;<i> number of sets fields
</I>&gt;<i>
</I>&gt;<i> Alastair Pout wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-devel">cost-project-devel-bounces at lists.berlios.de</A>
</I>&gt;&gt;<i> [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-devel">cost-project-devel-bounces at lists.berlios.de</A>] On Behalf Of
</I>&gt;&gt;<i> Alastair Pout
</I>&gt;&gt;<i> Sent: 13 December 2007 12:00
</I>&gt;&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-devel">cost-project-devel at lists.berlios.de</A>
</I>&gt;&gt;<i> Subject: Re: [cost-devel] Validation function - clash of trpNum filed
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-devel">cost-project-devel-bounces at lists.berlios.de</A>
</I>&gt;&gt;<i> [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-devel">cost-project-devel-bounces at lists.berlios.de</A>] On Behalf Of
</I>&gt;&gt;<i> ernesto
</I>&gt;&gt;<i> Sent: 13 December 2007 11:34
</I>&gt;&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-devel">cost-project-devel at lists.berlios.de</A>
</I>&gt;&gt;<i> Subject: Re: [cost-devel] Validation function
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Alastair Pout wrote:
</I>&gt;&gt;<i>   
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-devel">cost-project-devel-bounces at lists.berlios.de</A>
</I>&gt;&gt;&gt;<i> [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-devel">cost-project-devel-bounces at lists.berlios.de</A>] On Behalf Of
</I>&gt;&gt;&gt;<i> ernesto
</I>&gt;&gt;&gt;<i> Sent: 13 December 2007 10:14
</I>&gt;&gt;&gt;<i> To: Cost-devel Mailing List
</I>&gt;&gt;&gt;<i> Subject: [cost-devel] Validation function
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Alastair in his email mentions the &quot;Check.fields&quot; function which
</I>&gt;&gt;&gt;<i>       
</I>&gt;<i> looks
</I>&gt;<i>   
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i>   
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> like doing a very good job. My doubt is about what is being returned
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> by 
</I>&gt;&gt;<i>   
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> this method.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Does it correct the fields or provide methods to correct them ? This 
</I>&gt;&gt;&gt;<i> code checking together with error checking (mis allocations,
</I>&gt;&gt;&gt;<i>       
</I>&gt;<i> outliers,
</I>&gt;<i>   
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i>   
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> etc) should end up by creating VALIDATED objects, so we need to
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> include 
</I>&gt;&gt;<i>   
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> that functionality somewhere. My idea is that it should be included
</I>&gt;&gt;&gt;<i>       
</I>&gt;<i> in
</I>&gt;<i>   
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i>   
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> the creator function of the validated datasets csDataVal, ceDataVal
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> and 
</I>&gt;&gt;<i>   
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> clDataVal, which for the moment return empty objects. Try
</I>&gt;&gt;&gt;<i>       
</I>&gt;<i> csDataVal().
</I>&gt;<i>   
</I>&gt;&gt;&gt;<i> These methods can be moved to COSTEDA.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Best
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> EJ
</I>&gt;&gt;&gt;<i>  
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Cost-project-devel mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-devel">Cost-project-devel at lists.berlios.de</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-devel">https://lists.berlios.de/mailman/listinfo/cost-project-devel</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>       
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i>   
</I>&gt;&gt;&gt;<i> This email has been scanned by the MessageLabs Email Security System.
</I>&gt;&gt;&gt;<i> For more information please visit <A HREF="http://www.messagelabs.com/email">http://www.messagelabs.com/email</A> 
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>       
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i>   
</I>&gt;&gt;&gt;<i> Hi Ernesto 
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> At present my check.fileds checks strings against the code list and
</I>&gt;&gt;&gt;<i> numerics for type and against the ranges specified in FF. 
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The output reports unrecognised values for strings and out of range
</I>&gt;&gt;&gt;<i> values, non integer values and non real values for the numerics. For
</I>&gt;&gt;&gt;<i> strings it prints out which string values are unrecognised and tells
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> you
</I>&gt;&gt;<i>   
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> how many. It also reports complete NA fields. 
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I don't correct anything as my understanding was that this was the
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> users
</I>&gt;&gt;<i>   
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> responsibility, we just say what is incompatible with the exchange
</I>&gt;&gt;&gt;<i> format.  
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Again my understanding was that my function and Mathieu's error
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> checking
</I>&gt;&gt;<i>   
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> function (which does the misallocated values) formed the basis of the
</I>&gt;&gt;&gt;<i> pre validation checks. 
</I>&gt;&gt;&gt;<i> To create the validation stage objects we could can incorporate some
</I>&gt;&gt;&gt;<i> correcting or get these functions to return only validated objects if
</I>&gt;&gt;&gt;<i> that is the way we want to go. Need to coordinate that of course. 
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> This is my output for 
</I>&gt;&gt;&gt;<i> check.fields(solece) 
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>   
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;&gt;&gt;<i> check.fields(solece)
</I>&gt;&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;&gt;<i>       
</I>&gt;&gt;&gt;&gt;<i>         
</I>&gt;&gt;&gt;<i>         This is a ce Data object
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>          $vslFlgCtry is OK
</I>&gt;&gt;&gt;<i>          $year is OK
</I>&gt;&gt;&gt;<i>          $quarter is OK
</I>&gt;&gt;&gt;<i>          $month contains non integer values
</I>&gt;&gt;&gt;<i>          $area contains 112 unrecognised entries of values:
</I>&gt;&gt;&gt;<i>                  27.7.e 27.7.d 
</I>&gt;&gt;&gt;<i>          $rect is entirely NA 
</I>&gt;&gt;&gt;<i>          $foCatNat is entirely NA 
</I>&gt;&gt;&gt;<i>          $foCatEu5 contains 112 unrecognised entries of values:
</I>&gt;&gt;&gt;<i>                  GNS_Crustaceans GNS_Demersal_fish GNS_Molluscs
</I>&gt;&gt;&gt;<i> GTR_Demersal_fish OTB_Crustaceans OTB_Demersal_fish OTB_Molluscs
</I>&gt;&gt;&gt;<i> OTB_Small_pelagic_fish 
</I>&gt;&gt;&gt;<i>          $foCatEu6 is entirely NA 
</I>&gt;&gt;&gt;<i>          $trpNum is OK
</I>&gt;&gt;&gt;<i>          $foNum is entirely NA
</I>&gt;&gt;&gt;<i>          $foDur is entirely NA
</I>&gt;&gt;&gt;<i>          $effKwDays is entirely NA
</I>&gt;&gt;&gt;<i>          $effGtDays is entirely NA
</I>&gt;&gt;&gt;<i>          $daysAtSea is entirely NA
</I>&gt;&gt;&gt;<i>   
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> All the best
</I>&gt;&gt;&gt;<i> Alastair
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The output looks ok, maybe you should include an option to print it or
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> save in a file.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What I remember about our discussion was that the VALIDATED dataset 
</I>&gt;&gt;<i> could be different from users databases and exchange files, because
</I>&gt;&gt;<i>     
</I>&gt;<i> this
</I>&gt;<i>   
</I>&gt;&gt;<i> error checking was done inside R. In that case users may want to go
</I>&gt;&gt;<i>     
</I>&gt;<i> back
</I>&gt;<i>   
</I>&gt;&gt;<i> to their databases or exchange file and fix the errors. But I
</I>&gt;&gt;<i>     
</I>&gt;<i> understood
</I>&gt;<i>   
</I>&gt;&gt;<i> that we would provide methods for users to correct errors, coding 
</I>&gt;&gt;<i> problems etc, within R and create the VALIDATED dataset. The
</I>&gt;&gt;<i>     
</I>&gt;<i> alternative
</I>&gt;<i>   
</I>&gt;&gt;<i> option would be to ask users to fix errors outside R and read the 
</I>&gt;&gt;<i> dataset a second time, but in that case we don't need to VALIDATED
</I>&gt;&gt;<i> classes.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I also remember we discussed the possibility of including the reports 
</I>&gt;&gt;<i> (like yours) on the VALIDATED classes, to keep data and analysis 
</I>&gt;&gt;<i> together, but did not conclude on anything. Looking at your report I 
</I>&gt;&gt;<i> think we should include it on the class with a slot called &quot;report&quot; or
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> &quot;checkReport&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Best
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> EJ
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi Ernesto
</I>&gt;&gt;<i> Just noticed that we have 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> $trpNum in cs data for the individual national code number for the
</I>&gt;&gt;<i>     
</I>&gt;<i> trip.
</I>&gt;<i>   
</I>&gt;&gt;<i> and
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> $trpNum in ce data for the number of trips as a measure of effort
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> All the best
</I>&gt;&gt;<i> Alastair
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Think similar (but lesser) problem applies to 
</I>&gt;&gt;<i> $daysAtSea and $foNum in tr and ce tables in that they mean different
</I>&gt;&gt;<i> things and as such they have different applicable range values.  
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> All the best
</I>&gt;&gt;<i> Alastair
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> If you agree I'll change trpNum in cs to trpCode which is more explicit 
</I>&gt;<i> regarding its usage.
</I>&gt;<i>
</I>&gt;<i> WRT to days at sea and foNum (this is the field called &quot;Number of 
</I>&gt;<i> sets/hauls&quot;), these are different metrics, in a day at sea ($daysAtSea) 
</I>&gt;<i> you may execute several fishing operations ($foNum).
</I>&gt;<i>
</I>&gt;<i> Best
</I>&gt;<i>
</I>&gt;<i> EJ
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hi 
</I>&gt;<i> Yes changing $trpNum in cs to $trpCode would be good. 
</I>&gt;<i>
</I>&gt;<i> The thing with $daysAtSea and $foNum is that they both occur in tr
</I>&gt;<i> tables and ce tables. 
</I>&gt;<i> In tr tables they are a measure of days at sea per trip and hauls per
</I>&gt;<i> trip and as such (in ff &quot;basic checks&quot;) the ranges are 1-60 and 1-99
</I>&gt;<i> respectively. 
</I>&gt;<i> In ce tables $daysAtSea is summed for stock, gear, month, statrect etc
</I>&gt;<i> etc as a measure of effort, as is $foNum. The ff basic checks give
</I>&gt;<i> ranges of 1 to 1000 and 1 to 250000. 
</I>&gt;<i> If we want a unique set of field names with a single code list or
</I>&gt;<i> numeric range then we need to be able to distinguish between $daysAtSea
</I>&gt;<i> and $foNum in tr and ce tables. Alternatively I can separate them within
</I>&gt;<i> the function according to table name and range check them that way.
</I>&gt;<i> In my opinion having a unique set of field names is much the better
</I>&gt;<i> option.  
</I>&gt;<i>   
</I>&gt;<i> All the best
</I>&gt;<i> Alastair
</I>
Hi,

I see your point about these fields but I'm a bit reluctant in changing 
names. These fields refer to the same type of information but at 
different levels of aggregation. In that sense I'd rather keep them with 
the same name so that users know they're dealing with the same info. 
Changing the names to match the aggregation level may be tricky because 
we'd have to deal with all sorts of aggregation options.

IMO you should include the table name on your report.

Best

EJ



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000091.html">[cost-devel] Validation function - clash of Days at sea	and	number of sets fields
</A></li>
	<LI>Next message: <A HREF="000083.html">[cost-devel] COSTcore 0.5-0 released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#93">[ date ]</a>
              <a href="thread.html#93">[ thread ]</a>
              <a href="subject.html#93">[ subject ]</a>
              <a href="author.html#93">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cost-project-devel">More information about the Cost-project-devel
mailing list</a><br>
</body></html>
